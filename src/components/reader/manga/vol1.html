<html><meta content="text/html;charset=utf-8" http-equiv="Content-Type"><meta content="utf-8" http-equiv="encoding"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, user-scalable=no"/><head><title>vol1 | mokuro</title><style>:root {
    --textBoxDisplay: initial;
    --textBoxBorderHoverColor: rgba(237, 28, 36, 0.5);
    --textBoxFontSize: 1em;

    --colorBackground: #C4C3D0;
    --color1: #f9f9fb;
    --color2: #e2e2e9;
    --color3: #071013;
    --color3a: rgba(7, 16, 19, 0.3);

}

body {
    overflow: hidden;
    margin: 0;
    background-color: var(--colorBackground);
}

.notransition {
    transition: none !important;
}

#topMenu *, .popup * {
    font-family: "Open Sans", sans-serif;
}

.pageContainer * {
    font-family: "Noto Sans JP", "Meiryo", "MS Gothic", sans-serif;
}

.pageContainer {
    position: relative;
    margin: 0 auto;
}

.pageContainer:hover .textBox {
    border: 2px solid var(--textBoxBorderHoverColor);
}

.textBox {
    display: var(--textBoxDisplay);
    position: absolute;
    padding: 0;
    line-height: 1.1em;
    font-size: 16pt;
    white-space: nowrap;
    border: 1px solid rgba(0, 0, 0, 0);
}

.textBox:hover {
    background: rgb(255, 255, 255);
    border: 1px solid rgba(0, 0, 0, 0);
    z-index: 999 !important;
}

.textBox p {
    display: none;
    white-space: nowrap;
    letter-spacing: 0.1em;
    line-height: 1.1em;
    margin: 0;
    background-color: rgb(255, 255, 255);
}

.textBoxFontSizeOverride .textBox p {
    font-size: var(--textBoxFontSize) !important;
}

.textBox:hover p {
    display: table;
}

.hovered {
    background: rgb(255, 255, 255);
    border: 1px solid rgba(0, 0, 0, 0);
    z-index: 999 !important;
}

.hovered p {
    display: table;
}

#pagesContainer {
    display: inline-flex;
    flex-direction: row;
    overflow: visible;
}

#pagesContainer.inverted {
    -webkit-filter: invert(100%);
    filter: invert(100%);
}

.page {
    display: none;
    float: left;
    margin: 0 -1px 0 0;
}

#leftAPage, #rightAPage, #leftAScreen, #rightAScreen {
    z-index: 1;
    background-color: rgba(0, 0, 0, 0);
}

#leftAPage, #rightAPage {
    /*display: inline-block;*/
    display: none;
    position: absolute;
    top: -5%;
    width: 10%;
    height: 110%;
}

#leftAPage {
    left: -7%;
}

#rightAPage {
    right: -7%;
}

#leftAScreen, #rightAScreen {
    display: inline-block;
    position: fixed;
    top: 10vh;
    width: 5vw;
    height: 90vh;
}

#leftAScreen {
    left: 0;
}

#rightAScreen {
    right: 0;
}

#showMenuA {
    display: none;
    position: fixed;
    left: 0;
    top: 0;
    width: 3em;
    height: 3em;
    z-index: 1000;
    background-color: rgba(0, 0, 0, 0);
}

#topMenu {
    position: fixed;
    z-index: 1000;
    top: 0;
    left: 0;
    margin: 5px;
    background: var(--color1);
    border-radius: 3px;
    box-shadow: 0px 0px 8px 0px var(--color3a);
    transition: all 0.5s ease-out, max-width 0s ease-in;
    visibility: visible;
    opacity: 1;
    max-width: 100vw;
    white-space: nowrap;
}


#topMenu.hidden {
    max-width: 2.5em;
    visibility: hidden;
    opacity: 0;
    overflow: hidden;
    transition: all 1s ease-in, max-width 0.5s ease-out;
}

#topMenu * {
    font-size: 1em;
    vertical-align: middle;
}

#topMenu input {
    height: 1.4em;
    margin: 0 6px;
}

#pageIdxDisplay {
    margin-left: 0.5em;
    margin-right: 0.5em;
}

.menuButton {
    background-color: rgba(0, 0, 0, 0);
    color: var(--color3);
    border: none;
    width: 2.5em;
    height: 2.2em;
    border-radius: 3px;
}

.menuButton svg {
    max-height: 1.5em;
}

.menuButton:hover {
    background-color: var(--color2);
}

.dropdown:hover #dropbtn {
    background-color: var(--color2);
}

.dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-content {
    display: none;
    position: absolute;
    right: 0;
    background-color: var(--color1);
    box-shadow: 0px 0px 8px 0px var(--color3a);
    z-index: 1000;
    border-radius: 3px;
    max-height: 90vh;
    overflow: hidden;
    overflow-y: auto;
}

.dropdown-content .buttonRow {
    display: flex;
}

.dropdown-content .menuButton {
    flex: 1 1 auto;
    align-self: center;
}


.dropdown-content .dropdown-option {
    color: var(--color3);
    padding: 10px 10px;
    text-decoration: none;
    white-space: nowrap;
    display: block;
    border-radius: 3px;
}

.dropdown-content .dropdown-option:hover {
    background-color: var(--color2);
}

.dropdown-content .dropdown-option [type="checkbox"] {
    vertical-align: middle;
}

.dropdown:hover .dropdown-content {
    display: block;
}

#dimOverlay {
    display: none;
    position: fixed;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: 1001;
    background-color: rgba(0, 0, 0, 0.5);
}

.popup {
    display: none;
    position: fixed;
    top: 50vh;
    left: 50vw;
    width: min(720px, 80vw);
    height: min(480px, 80vh);
    margin-left: max(-360px, -40vw);
    margin-top: max(-240px, -40vh);
    z-index: 1002;
    background-color: var(--color1);
    color: var(--color3);
    box-shadow: 0px 0px 10px 4px var(--color3a);
    border-radius: 3px;
    overflow: auto;
    padding: 20px;
    box-sizing: border-box;
    line-height: 1.5em;
}


/*hide arrows from number input*/
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

input[type=number] {
    -moz-appearance: textfield;
}
</style></head><body><a id="showMenuA" href="#"></a><div id="topMenu"><button id="buttonHideMenu" class="menuButton"><svg width="21px" height="21px" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(5 5)"><path d="m10.5 10.5-10-10z"/><path d="m10.5.5-10 10"/></g></svg></button><button id="buttonLeftLeft" class="menuButton"><svg width="21px" height="21px" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(5 6)"><path d="m8.5 8.5-4-4 4-4"/><path d="m4.5 8.5-4-4 4-4"/></g></svg></button><button id="buttonLeft" class="menuButton"><svg width="21px" height="21px" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m4.5 8.5-4-4 4-4" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(7 6)"/></svg></button><button id="buttonRight" class="menuButton"><svg width="21px" height="21px" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m.5 8.5 4-4-4-4" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(9 6)"/></svg></button><button id="buttonRightRight" class="menuButton"><svg width="21px" height="21px" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(7 6)"><path d="m.5 8.5 4-4-4-4"/><path d="m4.5 8.5 4-4-4-4"/></g></svg></button><input required type="number" id="pageIdxInput" min="1" max="161" value="1" size="3"></input><span id="pageIdxDisplay"></span><span style="color:rgba(255,255,255,0.1);font-size:1px;">。</span><div class="dropdown"><button id="dropbtn" class="menuButton"><svg width="21px" height="21px" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="m4.5 6.5h12"/><path d="m4.498 10.5h11.997"/><path d="m4.5 14.5h11.995"/></g></svg></button><div class="dropdown-content"><div class="buttonRow"><button id="menuFitToScreen" class="menuButton"><svg width="21px" height="21px" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(2 2)"><path d="m16.5 5.5v-5h-5"/><path d="m16.5.5-6 5.929"/><path d="m5.5 16.5-5 .023v-5.023"/><path d="m6.5 10.5-6 6"/></g></svg></button><button id="menuFitToWidth" class="menuButton"><svg width="21px" height="21px" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(1 2)"><path d="m.5.5v16.021"/><path d="m18.5.5v16.021"/><path d="m12.507 12.515 4-4-4-4.015"/><path d="m6.507 12.515-4-4 4-4.015"/><path d="m16.5 8.5h-14"/></g></svg></button><button id="menuOriginalSize" class="menuButton">1:1</button><button id="menuFullScreen" class="menuButton"><svg width="21px" height="21px" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" transform="translate(2 2)"><path d="m16.5 5.5v-4.978l-5.5.014"/><path d="m16.5.522-6 5.907"/><path d="m11 16.521 5.5.002-.013-5.5"/><path d="m16.5 16.429-6-5.907"/><path d="m.5 5.5v-5h5.5"/><path d="m6.5 6.429-6-5.907"/><path d="m6 16.516-5.5.007v-5.023"/><path d="m6.5 10.5-6 6"/></g></svg></button></div><label class="dropdown-option">on page turn: <select id="menuDefaultZoom"><option value="fit to screen">fit to screen</option><option value="fit to width">fit to width</option><option value="original size">original size</option><option value="keep zoom level">keep zoom level</option></select></label><label class="dropdown-option">right to left<input type="checkbox" id="menuR2l"></input></label><label class="dropdown-option">display two pages <input type="checkbox" id="menuDoublePageView"></input></label><label class="dropdown-option">first page is cover <input type="checkbox" id="menuHasCover"></input></label><label class="dropdown-option">ctrl+mouse to move <input type="checkbox" id="menuCtrlToPan"></input></label><label class="dropdown-option">OCR enabled <input type="checkbox" id="menuDisplayOCR"></input></label><label class="dropdown-option">display boxes outlines <input type="checkbox" id="menuTextBoxBorders"></input></label><label class="dropdown-option">editable text <input type="checkbox" id="menuEditableText"></input></label><label class="dropdown-option">font size: <select id="menuFontSize"><option value="auto">auto</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="14">14</option><option value="16">16</option><option value="18">18</option><option value="20">20</option><option value="24">24</option><option value="32">32</option><option value="40">40</option><option value="48">48</option><option value="60">60</option></select></label><label class="dropdown-option">e-ink mode <input type="checkbox" id="menuEInkMode"></input></label><label class="dropdown-option">toggle OCR text boxes on click<input type="checkbox" id="menuToggleOCRTextBoxes"></input></label><label class="dropdown-option">background color<input type="color" value="#C4C3D0" id="menuBackgroundColor"></input></label><a href="#" class="dropdown-option" id="menuReset">reset settings</a><a href="#" class="dropdown-option" id="menuAbout">about/help</a></div></div></div><div id="dimOverlay"></div><div id="popupAbout" class="popup">
<p>HTML overlay generated with <a href="https://github.com/kha-white/mokuro" target="_blank">mokuro</a> version 0.2.2</p>
<p>Instructions:</p>
<ul>
<li>Navigate pages with:
    <ul>
    <li>menu buttons</li>
    <li>Page Up, Page Down, Home, End keys</li>
    <li>by clicking left/right edge of the screen</li>
    </ul>
<li>Click &#10005; button to hide the menu. To bring it back, clip top-left corner of the screen.</li>
<li>Select "editable boxes" option, to edit text recognized by OCR. Changes are not saved, it's only for ad-hoc fixes when using look-up dictionary.</li>
<li>E-ink mode turns off animations and simulates display refresh on each page turn.</li>
</ul>
</div><a id="leftAScreen" href="#"></a><a id="rightAScreen" href="#"></a><div id="pagesContainer"><div id="page0" class="page"><div class="pageContainer" style="width:1044; height:1439; background-image:url(&quot;vol1/001.jpg&quot;);"><div class="textBox" style="left:236; top:75; width:268; height:128; font-size:32px; z-index:12;"><p>［原們菊池快晴</p><p>ｒ作画Ｊ小田童馬</p><p>【キャラクター原案】桑島黎音</p></div><div class="textBox" style="left:53; top:910; width:420; height:121; font-size:32px; z-index:11;"><p>規約外の</p></div><div class="textBox" style="left:136; top:853; width:763; height:199; font-size:32.0px; z-index:10;"><p>いや．．．いや、ヤツがないのかな。</p><p>最凶</p></div><div class="textBox" style="left:735; top:1384; width:263; height:28; font-size:30px; z-index:13;"><p>ＤＲＡＧＯＮＥＯＭＥＳＡＧＥ</p></div></div></div><div id="page1" class="page"><div class="pageContainer" style="width:1044; height:1439; background-image:url(&quot;vol1/002.jpg&quot;);"><div class="textBox" style="left:611; top:267; width:208; height:14; font-size:14px; z-index:16;"><p>ＣｏＮＴＥＮＴＳ</p></div><div class="textBox" style="left:798; top:314; width:18; height:449; font-size:18px; z-index:10; writing-mode:vertical-rl;"><p>第一章一部、役員族になってる！？</p></div><div class="textBox" style="left:732; top:314; width:18; height:356; font-size:18px; z-index:12; writing-mode:vertical-rl;"><p>第２章一歩怖の実戦テスト</p></div><div class="textBox" style="left:670; top:310; width:21; height:316; font-size:18px; z-index:11; writing-mode:vertical-rl;"><p>第３章一年半の成果</p></div><div class="textBox" style="left:612; top:296; width:18; height:228; font-size:18px; z-index:14; writing-mode:vertical-rl;"><p>「第４章一層に</p></div><div class="textBox" style="left:609; top:860; width:214; height:19; font-size:16px; z-index:15;"><p>２０１８年１０月１９日</p></div><div class="textBox" style="left:590; top:1384; width:250; height:19; font-size:21px; z-index:13;"><p>ＢｏｏｇｌｅＤａｓｔａｌ．ＡｒｒｉＰＲＣＨＯＷ</p></div></div></div><div id="page2" class="page"><div class="pageContainer" style="width:1044; height:1439; background-image:url(&quot;vol1/003.jpg&quot;);"><div class="textBox" style="left:143; top:26; width:197; height:101; font-size:23px; z-index:11;"><p>［原作］菊池快晴</p><p>【作画】小田童馬</p><p>【キャラクター原案】桑島黎音</p></div><div class="textBox" style="left:51; top:36; width:81; height:79; font-size:32px; z-index:12;"><p>１</p></div><div class="textBox" style="left:42; top:756; width:295; height:657; font-size:32px; z-index:10; writing-mode:vertical-rl;"><p>台心情、亜む写真だった。</p><p>転生したら俺、シナカな雰囲になり</p><p>．．</p><p>規模の成功最初になった</p></div></div></div><div id="page3" class="page"><div class="pageContainer" style="width:1044; height:1439; background-image:url(&quot;vol1/004.jpg&quot;);"><div class="textBox" style="left:302; top:90; width:317; height:100; font-size:29px; z-index:10;"><p>ＴＡＩＤＡＮ</p><p>ＡＫＵＪＯＫＵ</p></div></div></div><div id="page4" class="page"><div class="pageContainer" style="width:1044; height:1439; background-image:url(&quot;vol1/005.jpg&quot;);"><div class="textBox" style="left:805; top:91; width:36; height:100; font-size:32px; z-index:19; writing-mode:vertical-rl;"><p>ククク</p></div><div class="textBox" style="left:73; top:198; width:105; height:35; font-size:31px; z-index:18;"><p>第１章</p></div><div class="textBox" style="left:911; top:350; width:45; height:156; font-size:28px; z-index:14; writing-mode:vertical-rl;"><p>平民風情が</p></div><div class="textBox" style="left:448; top:732; width:94; height:187; font-size:29px; z-index:11; writing-mode:vertical-rl;"><p>俺に勝てると</p><p>思うのか？</p></div><div class="textBox" style="left:868; top:1046; width:46; height:121; font-size:32px; z-index:16; writing-mode:vertical-rl;"><p>模擬戰</p></div><div class="textBox" style="left:783; top:1085; width:55; height:117; font-size:32px; z-index:15; writing-mode:vertical-rl;"><p>始め！</p></div><div class="textBox" style="left:782; top:1086; width:41; height:119; font-size:32px; z-index:17; writing-mode:vertical-rl;"><p>始め！</p></div><div class="textBox" style="left:619; top:1032; width:83; height:134; font-size:32px; z-index:13; writing-mode:vertical-rl;"><p>見とけ</p><p>リリス！</p></div><div class="textBox" style="left:418; top:1114; width:159; height:282; font-size:32px; z-index:10; writing-mode:vertical-rl;"><p>このヴァイス様に</p><p>歯向かった奴が</p><p>大衆の前で大恥</p><p>かかされる様をなぁ！！</p></div><div class="textBox" style="left:54; top:1218; width:77; height:154; font-size:28px; z-index:12; writing-mode:vertical-rl;"><p>頑張って</p><p>ヴァイス様！</p></div></div></div><div id="page5" class="page"><div class="pageContainer" style="width:726; height:1032; background-image:url(&quot;vol1/006.jpg&quot;);"><div class="textBox" style="left:578; top:65; width:25; height:71; font-size:25px; z-index:19; writing-mode:vertical-rl;"><p>ククク</p></div><div class="textBox" style="left:22; top:125; width:163; height:67; font-size:24.666666666666668px; z-index:12;"><p>怠楷悪燾貴族</p><p>．．．というわけじゃないか</p><p>規格外・</p></div><div class="textBox" style="left:654; top:251; width:33; height:110; font-size:21px; z-index:17; writing-mode:vertical-rl;"><p>平民風情が</p></div><div class="textBox" style="left:484; top:585; width:119; height:91; font-size:27.666666666666668px; z-index:13;"><p>開始早々</p><p>負けフラク</p><p>ビジビンです</p></div><div class="textBox" style="left:324; top:525; width:65; height:134; font-size:22px; z-index:14; writing-mode:vertical-rl;"><p>俺に勝てると</p><p>思うのか？</p></div><div class="textBox" style="left:562; top:748; width:104; height:116; font-size:32px; z-index:11; writing-mode:vertical-rl;"><p>模擬戦</p><p>始め！</p></div><div class="textBox" style="left:562; top:778; width:40; height:84; font-size:32px; z-index:18; writing-mode:vertical-rl;"><p>始め！</p></div><div class="textBox" style="left:445; top:740; width:59; height:95; font-size:24px; z-index:16; writing-mode:vertical-rl;"><p>見とけ</p><p>リリス！</p></div><div class="textBox" style="left:301; top:799; width:113; height:201; font-size:24px; z-index:10; writing-mode:vertical-rl;"><p>このヴァイス様に</p><p>歯向かった奴が</p><p>大衆の前で大恥</p><p>かかされる様をなぁ！！</p></div><div class="textBox" style="left:40; top:873; width:54; height:110; font-size:20px; z-index:15; writing-mode:vertical-rl;"><p>頑張って</p><p>ヴァイス様！</p></div></div></div><div id="page6" class="page"><div class="pageContainer" style="width:726; height:1032; background-image:url(&quot;vol1/007.jpg&quot;);"><div class="textBox" style="left:136; top:166; width:232; height:296; font-size:32px; z-index:10; writing-mode:vertical-rl;"><p>ヴァイス様</p><p>あぁああ</p><p>あああ！！！</p></div></div></div><div id="page7" class="page"><div class="pageContainer" style="width:726; height:1032; background-image:url(&quot;vol1/008.jpg&quot;);"><div class="textBox" style="left:531; top:56; width:136; height:199; font-size:32px; z-index:10; writing-mode:vertical-rl;"><p>彼は</p><p>ヴァイス・</p><p>ファンセント</p></div><div class="textBox" style="left:63; top:89; width:95; height:137; font-size:32px; z-index:12; writing-mode:vertical-rl;"><p>通称・</p><p>悪辱貴族</p></div><div class="textBox" style="left:580; top:387; width:64; height:195; font-size:27px; z-index:13; writing-mode:vertical-rl;"><p>主人公アレンに</p><p>負けたヴァイスは</p></div><div class="textBox" style="left:517; top:513; width:24; height:102; font-size:27px; z-index:17; writing-mode:vertical-rl;"><p>そこから</p></div><div class="textBox" style="left:482; top:516; width:61; height:120; font-size:25px; z-index:14; writing-mode:vertical-rl;"><p>全てを失い</p></div><div class="textBox" style="left:65; top:525; width:143; height:98; font-size:26px; z-index:11; writing-mode:vertical-rl;"><p>最終的に</p><p>魔王に</p><p>盾として</p><p>使われ</p></div><div class="textBox" style="left:608; top:729; width:40; height:90; font-size:32px; z-index:16; writing-mode:vertical-rl;"><p>．．．死ぬ</p></div><div class="textBox" style="left:361; top:741; width:30; height:76; font-size:30px; z-index:18; writing-mode:vertical-rl;"><p>そして</p></div><div class="textBox" style="left:76; top:850; width:44; height:102; font-size:32px; z-index:15; writing-mode:vertical-rl;"><p>俺は：</p></div></div></div><div id="page8" class="page"><div class="pageContainer" style="width:719; height:1032; background-image:url(&quot;vol1/009.jpg&quot;);"><div class="textBox" style="left:469; top:81; width:204; height:212; font-size:32px; z-index:11; writing-mode:vertical-rl;"><p>その</p><p>ヴァイスに</p><p>転生して</p><p>しまった！</p></div><div class="textBox" style="left:98; top:436; width:63; height:155; font-size:32px; z-index:14; writing-mode:vertical-rl;"><p>いつのまにか</p></div><div class="textBox" style="left:261; top:517; width:51; height:118; font-size:32px; z-index:15; writing-mode:vertical-rl;"><p>のために</p></div><div class="textBox" style="left:17; top:812; width:189; height:120; font-size:32.0px; z-index:12;"><p>転職し</p><p>規格外</p></div><div class="textBox" style="left:236; top:687; width:458; height:241; font-size:32.0px; z-index:10;"><p>貴族・</p><p>でも、シブリをふっ閉じたら</p><p>後から壊したらカレーになった</p></div><div class="textBox" style="left:53; top:966; width:588; height:26; font-size:24px; z-index:13;"><p>［原何菊池快晴ｒ作画］小田童馬は一つ一般廃島繁音</p></div></div></div><div id="page9" class="page"><div class="pageContainer" style="width:719; height:1032; background-image:url(&quot;vol1/010.jpg&quot;);"><div class="textBox" style="left:20; top:38; width:635; height:144; font-size:32px; z-index:10;"><p>私は成り上がりますが、学園ファンタジーと</p><p>イズ開幕！！！</p></div><div class="textBox" style="left:373; top:404; width:111; height:314; font-size:32px; z-index:11; writing-mode:vertical-rl;"><p>ならちゃいました！？</p></div><div class="textBox" style="left:165; top:835; width:139; height:90; font-size:32px; z-index:12;"><p>原作小説</p><p>第２巻</p><p>大姫評発売中</p></div><div class="textBox" style="left:190; top:938; width:97; height:46; font-size:12px; z-index:13;"><p>著：菊池快晴</p><p>イラスト・素晴案・</p><p>真川スニーカー文を</p></div><div class="textBox" style="left:26; top:963; width:61; height:33; font-size:32px; z-index:14;"><p>第１位第</p></div></div></div><div id="page10" class="page"><div class="pageContainer" style="width:726; height:1032; background-image:url(&quot;vol1/011.jpg&quot;);"><div class="textBox" style="left:438; top:473; width:172; height:17; font-size:17px; z-index:10;"><p>「悪役貴族になっ</p></div><div class="textBox" style="left:140; top:901; width:20; height:125; font-size:19px; z-index:11; writing-mode:vertical-rl;"><p>はー</p></div></div></div><div id="page11" class="page"><div class="pageContainer" style="width:726; height:1032; background-image:url(&quot;vol1/012.jpg&quot;);"></div></div><div id="page12" class="page"><div class="pageContainer" style="width:726; height:1032; background-image:url(&quot;vol1/013.jpg&quot;);"><div class="textBox" style="left:632; top:614; width:32; height:184; font-size:28px; z-index:10; writing-mode:vertical-rl;"><p>．．．．．</p></div></div></div><div id="page13" class="page"><div class="pageContainer" style="width:726; height:1032; background-image:url(&quot;vol1/014.jpg&quot;);"><div class="textBox" style="left:591; top:51; width:60; height:174; font-size:32px; z-index:13; writing-mode:vertical-rl;"><p>だれ？</p></div><div class="textBox" style="left:526; top:429; width:122; height:163; font-size:30px; z-index:10; writing-mode:vertical-rl;"><p>どどどとどど</p><p>どういう．．</p><p>こと．．．？</p></div><div class="textBox" style="left:533; top:681; width:120; height:105; font-size:24px; z-index:12; writing-mode:vertical-rl;"><p>俺は</p><p>さっきまで</p><p>ゲームを</p><p>していた</p></div><div class="textBox" style="left:200; top:684; width:116; height:164; font-size:24px; z-index:11; writing-mode:vertical-rl;"><p>だが気づけば</p><p>目の前で女性が</p><p>あられもない姿で</p><p>縛られている</p></div><div class="textBox" style="left:62; top:577; width:28; height:37; font-size:28px; z-index:14; writing-mode:vertical-rl;"><p>？</p></div></div></div><div id="page14" class="page"><div class="pageContainer" style="width:726; height:1032; background-image:url(&quot;vol1/015.jpg&quot;);"><div class="textBox" style="left:399; top:602; width:21; height:112; font-size:21px; z-index:15; writing-mode:vertical-rl;"><p>ヴァイス様</p></div><div class="textBox" style="left:313; top:627; width:55; height:117; font-size:21px; z-index:12; writing-mode:vertical-rl;"><p>どうされ</p><p>ましたか？</p></div><div class="textBox" style="left:183; top:554; width:87; height:193; font-size:32px; z-index:10; writing-mode:vertical-rl;"><p>綺麗な子だー</p></div><div class="textBox" style="left:609; top:836; width:52; height:62; font-size:25px; z-index:14; writing-mode:vertical-rl;"><p>あれ？</p></div><div class="textBox" style="left:607; top:836; width:25; height:64; font-size:22px; z-index:16; writing-mode:vertical-rl;"><p>でも．．．</p></div><div class="textBox" style="left:527; top:847; width:51; height:122; font-size:22px; z-index:13; writing-mode:vertical-rl;"><p>どこかで</p><p>見たことが．．</p></div><div class="textBox" style="left:404; top:823; width:63; height:129; font-size:21px; z-index:11; writing-mode:vertical-rl;"><p>それに．．．</p><p>ヴァイス？</p></div></div></div><div id="page15" class="page"><div class="pageContainer" style="width:726; height:1032; background-image:url(&quot;vol1/016.jpg&quot;);"><div class="textBox" style="left:518; top:89; width:121; height:249; font-size:32px; z-index:11; writing-mode:vertical-rl;"><p>もしかして</p><p>俺</p></div><div class="textBox" style="left:0; top:42; width:211; height:461; font-size:32px; z-index:10; writing-mode:vertical-rl;"><p>悪役凌辱貴族の</p><p>悪役返辱責族のヴァイスになってるぅ～ッ？</p></div><div class="textBox" style="left:621; top:860; width:38; height:121; font-size:25px; z-index:13; writing-mode:vertical-rl;"><p>間違いない</p></div><div class="textBox" style="left:33; top:846; width:179; height:153; font-size:22px; z-index:12; writing-mode:vertical-rl;"><p>学園ゲーム</p><p>「ノブレス・</p><p>オブリージュ」の</p><p>悪役キャラ．．</p><p>ヴァイス・</p><p>ファンセントだ</p></div></div></div>
<script>let num_pages = -1;
let pc = document.getElementById('pagesContainer');
let r = document.querySelector(':root');
let pz;
let showAboutOnStart = false;

let storageKey = "mokuro_" + window.location.pathname;

let defaultState = {
    page_idx: 0,
    page2_idx: -1,
    hasCover: false,
    r2l: true,
    singlePageView: false,
    ctrlToPan: false,
    textBoxBorders: false,
    editableText: false,
    displayOCR: true,
    fontSize: "auto",
    eInkMode: false,
    defaultZoomMode: "fit to screen",
    toggleOCRTextBoxes: false,
    backgroundColor: '#C4C3D0',
};

let state = JSON.parse(JSON.stringify(defaultState));

function saveState() {
    localStorage.setItem(storageKey, JSON.stringify(state));
}

function loadState() {
    let newState = localStorage.getItem(storageKey)

    if (newState !== null) {
        state = JSON.parse(newState);
    }

    updateUI();
    updateProperties();
}

function updateUI() {
    document.getElementById("menuR2l").checked = state.r2l;
    document.getElementById("menuCtrlToPan").checked = state.ctrlToPan;
    document.getElementById("menuDoublePageView").checked = !state.singlePageView;
    document.getElementById("menuHasCover").checked = state.hasCover;
    document.getElementById("menuTextBoxBorders").checked = state.textBoxBorders;
    document.getElementById("menuEditableText").checked = state.editableText;
    document.getElementById("menuDisplayOCR").checked = state.displayOCR;
    document.getElementById('menuFontSize').value = state.fontSize;
    document.getElementById('menuEInkMode').checked = state.eInkMode;
    document.getElementById('menuDefaultZoom').value = state.defaultZoomMode;
    document.getElementById('menuToggleOCRTextBoxes').checked = state.toggleOCRTextBoxes;
    document.getElementById('menuBackgroundColor').value = state.backgroundColor;
}

document.addEventListener('DOMContentLoaded', function () {
    loadState();
    num_pages = document.getElementsByClassName("page").length;

    checkImagesAndAlert();

    pz = panzoom(pc, {
        bounds: true,
        boundsPadding: 0.05,
        maxZoom: 10,
        minZoom: 0.1,
        zoomDoubleClickSpeed: 1,
        enableTextSelection: true,

        beforeMouseDown: function (e) {
            let shouldIgnore = disablePanzoomOnElement(e.target) ||
                (e.target.closest('.textBox') !== null) ||
                (state.ctrlToPan && !e.ctrlKey);
            return shouldIgnore;
        },

        beforeWheel: function (e) {
            let shouldIgnore = disablePanzoomOnElement(e.target);
            return shouldIgnore;
        },

        onTouch: function (e) {
            if (disablePanzoomOnElement(e.target)) {
                e.stopPropagation();
                return false;
            }

            if (e.touches.length > 1) {
                return true;
            } else {
                return false;
            }
        }

    });

    updatePage(state.page_idx);
    initTextBoxes();

    if (showAboutOnStart) {
        document.getElementById('popupAbout').style.display = 'block';
        document.getElementById('dimOverlay').style.display = 'initial';
        pz.pause();
    }

}, false);

function disablePanzoomOnElement(element) {
    return document.getElementById('topMenu').contains(element);
}

function initTextBoxes() {
// Add event listeners for toggling ocr text boxes with the toggleOCRTextBoxes option.
    let textBoxes = document.querySelectorAll('.textBox');
    for (let i = 0; i < textBoxes.length; i++) {
        textBoxes[i].addEventListener('click', function (e) {
            if (state.toggleOCRTextBoxes) {
                this.classList.add('hovered');
                // Remove hovered state from all other .textBoxes
                for (let j = 0; j < textBoxes.length; j++) {
                    if (i !== j) {
                        textBoxes[j].classList.remove('hovered');
                    }
                }
            }
        });
    }
// When clicking off of a .textBox, remove the hovered state.
    document.addEventListener('click', function (e) {
        if (state.toggleOCRTextBoxes) {
            if (e.target.closest('.textBox') === null) {
                let textBoxes = document.querySelectorAll('.textBox');
                for (let i = 0; i < textBoxes.length; i++) {
                    textBoxes[i].classList.remove('hovered');
                }
            }
        }
    });
}

function updateProperties() {
    if (state.textBoxBorders) {
        r.style.setProperty('--textBoxBorderHoverColor', 'rgba(237, 28, 36, 0.3)');
    } else {
        r.style.setProperty('--textBoxBorderHoverColor', 'rgba(0, 0, 0, 0)');
    }

    pc.contentEditable = state.editableText;

    if (state.displayOCR) {
        r.style.setProperty('--textBoxDisplay', 'initial');
    } else {
        r.style.setProperty('--textBoxDisplay', 'none');
    }


    if (state.fontSize === 'auto') {
        pc.classList.remove('textBoxFontSizeOverride');
    } else {
        r.style.setProperty('--textBoxFontSize', state.fontSize + 'pt');
        pc.classList.add('textBoxFontSizeOverride');
    }

    if (state.eInkMode) {
        document.getElementById('topMenu').classList.add("notransition");
    } else {
        document.getElementById('topMenu').classList.remove("notransition");
    }

    if (state.backgroundColor) {
        r.style.setProperty('--colorBackground', state.backgroundColor)
    }
}

document.getElementById('menuR2l').addEventListener('click', function () {
    state.r2l = document.getElementById("menuR2l").checked;
    saveState();
    updatePage(state.page_idx);
}, false);

document.getElementById('menuCtrlToPan').addEventListener('click', function () {
    state.ctrlToPan = document.getElementById("menuCtrlToPan").checked;
    saveState();
}, false);

document.getElementById('menuDoublePageView').addEventListener('click', function () {
    state.singlePageView = !document.getElementById("menuDoublePageView").checked;
    saveState();
    updatePage(state.page_idx);
}, false);

document.getElementById('menuHasCover').addEventListener('click', function () {
    state.hasCover = document.getElementById("menuHasCover").checked;
    saveState();
    updatePage(state.page_idx);
}, false);

document.getElementById('menuTextBoxBorders').addEventListener('click', function () {
    state.textBoxBorders = document.getElementById("menuTextBoxBorders").checked;
    saveState();
    updateProperties();
}, false);

document.getElementById('menuEditableText').addEventListener('click', function () {
    state.editableText = document.getElementById("menuEditableText").checked;
    saveState();
    updateProperties();
}, false);

document.getElementById('menuDisplayOCR').addEventListener('click', function () {
    state.displayOCR = document.getElementById("menuDisplayOCR").checked;
    saveState();
    updateProperties();
}, false);

document.getElementById('menuEInkMode').addEventListener('click', function () {
    state.eInkMode = document.getElementById("menuEInkMode").checked;
    saveState();
    updateProperties();
    if (state.eInkMode) {
        eInkRefresh();
    }
}, false);

document.getElementById('menuToggleOCRTextBoxes').addEventListener('click', function () {
    state.toggleOCRTextBoxes = document.getElementById("menuToggleOCRTextBoxes").checked;
    saveState();
    updateProperties();
}, false);

document.getElementById('menuBackgroundColor').addEventListener(
    'input',
    function (event) {
      state.backgroundColor = event.target.value;
      saveState();
      updateProperties();
    },
    false
  );

document.getElementById('menuOriginalSize').addEventListener('click', zoomOriginal, false);
document.getElementById('menuFitToWidth').addEventListener('click', zoomFitToWidth, false);
document.getElementById('menuFitToScreen').addEventListener('click', zoomFitToScreen, false);
document.getElementById('menuFullScreen').addEventListener('click', toggleFullScreen, false);

document.getElementById('menuAbout').addEventListener('click', function () {
    document.getElementById('popupAbout').style.display = 'block';
    document.getElementById('dimOverlay').style.display = 'initial';
    pz.pause();
}, false);

document.getElementById('menuReset').addEventListener('click', function () {
    let page_idx = state.page_idx;
    state = JSON.parse(JSON.stringify(defaultState));
    updateUI();
    updatePage(page_idx);
    updateProperties();
}, false);

document.getElementById('dimOverlay').addEventListener('click', function () {
    document.getElementById('popupAbout').style.display = 'none';
    document.getElementById('dimOverlay').style.display = 'none';
    pz.resume();
}, false);

document.getElementById('menuFontSize').addEventListener('change', (e) => {
    state.fontSize = e.target.value;
    saveState();
    updateProperties();
});

document.getElementById('menuDefaultZoom').addEventListener('change', (e) => {
    state.defaultZoomMode = e.target.value;
    saveState();
});


document.getElementById('pageIdxInput').addEventListener('change', (e) => {
    updatePage(e.target.value - 1);
})

document.getElementById('buttonHideMenu').addEventListener('click', function () {
    // document.getElementById('topMenu').style.display = "none";
    document.getElementById('showMenuA').style.display = "inline-block";
    document.getElementById('topMenu').classList.add("hidden");
}, false);

document.getElementById('showMenuA').addEventListener('click', function () {
    // document.getElementById('topMenu').style.display = "initial";
    document.getElementById('showMenuA').style.display = "none";
    document.getElementById('topMenu').classList.remove("hidden");
}, false);

document.getElementById('buttonLeftLeft').addEventListener('click', inputLeftLeft, false);
document.getElementById('buttonLeft').addEventListener('click', inputLeft, false);
document.getElementById('buttonRight').addEventListener('click', inputRight, false);
document.getElementById('buttonRightRight').addEventListener('click', inputRightRight, false);
document.getElementById('leftAPage').addEventListener('click', inputLeft, false);
document.getElementById('leftAScreen').addEventListener('click', inputLeft, false);
document.getElementById('rightAPage').addEventListener('click', inputRight, false);
document.getElementById('rightAScreen').addEventListener('click', inputRight, false);

document.addEventListener("keydown", function onEvent(e) {
    switch (e.key) {
        case "PageUp":
            prevPage();
            break;

        case "PageDown":
            nextPage();
            break;

        case "Home":
            firstPage();
            break;

        case "End":
            lastPage();
            break;

        case " ":
            nextPage();
            break;

        case "0":
            zoomDefault();
            break;
    }
});

function isPageFirstOfPair(page_idx) {
    if (state.singlePageView) {
        return true;
    } else {
        if (state.hasCover) {
            return (page_idx === 0 || (page_idx % 2 === 1));
        } else {
            return page_idx % 2 === 0;
        }
    }
}

function getPage(page_idx) {
    return document.getElementById("page" + page_idx);
}

function getOffsetLeft() {
    return 0;
}

function getOffsetTop() {
    let offset = 0;
    let menu = document.getElementById('topMenu');
    if (!menu.classList.contains("hidden")) {
        offset += menu.getBoundingClientRect().bottom + 10;
    }
    return offset;
}

function getOffsetRight() {
    return 0;
}

function getOffsetBottom() {
    return 0;
}

function getScreenWidth() {
    return window.innerWidth - getOffsetLeft() - getOffsetRight();
}

function getScreenHeight() {
    return window.innerHeight - getOffsetTop() - getOffsetBottom();
}

function panAlign(align_x, align_y) {
    let scale = pz.getTransform().scale;
    let x;
    let y;

    switch (align_x) {
        case "left":
            x = getOffsetLeft();
            break;
        case "center":
            x = getOffsetLeft() + (getScreenWidth() - pc.offsetWidth * scale) / 2;
            break;
        case "right":
            x = getOffsetLeft() + (getScreenWidth() - pc.offsetWidth * scale);
            break;
    }

    switch (align_y) {
        case "top":
            y = getOffsetTop();
            break;
        case "center":
            y = getOffsetTop() + (getScreenHeight() - pc.offsetHeight * scale) / 2;
            break;
        case "bottom":
            y = getOffsetTop() + (getScreenHeight() - pc.offsetHeight * scale);
            break;
    }

    pz.moveTo(x, y);
}


function zoomOriginal() {
    pz.moveTo(0, 0);
    pz.zoomTo(0, 0, 1 / pz.getTransform().scale);
    panAlign("center", "center");
}

function zoomFitToWidth() {
    let scale = (1 / pz.getTransform().scale) * (getScreenWidth() / pc.offsetWidth);
    pz.moveTo(0, 0);
    pz.zoomTo(0, 0, scale);
    panAlign("center", "top");
}

function zoomFitToScreen() {
    let scale_x = getScreenWidth() / pc.offsetWidth;
    let scale_y = getScreenHeight() / pc.offsetHeight;
    let scale = (1 / pz.getTransform().scale) * Math.min(scale_x, scale_y);
    pz.moveTo(0, 0);
    pz.zoomTo(0, 0, scale);
    panAlign("center", "center");
}

function zoomDefault() {
    switch (state.defaultZoomMode) {
        case "fit to screen":
            zoomFitToScreen();
            break;
        case "fit to width":
            zoomFitToWidth();
            break;
        case "original size":
            zoomOriginal();
            break;
    }
}

function updatePage(new_page_idx) {
    new_page_idx = Math.min(Math.max(new_page_idx, 0), num_pages - 1);

    getPage(state.page_idx).style.display = "none";

    if (state.page2_idx >= 0) {
        getPage(state.page2_idx).style.display = "none";
    }

    if (isPageFirstOfPair(new_page_idx)) {
        state.page_idx = new_page_idx;
    } else {
        state.page_idx = new_page_idx - 1;
    }

    getPage(state.page_idx).style.display = "inline-block";
    getPage(state.page_idx).style.order = 2;

    if (!state.singlePageView && state.page_idx < num_pages - 1 && !isPageFirstOfPair(state.page_idx + 1)) {
        state.page2_idx = state.page_idx + 1;
        getPage(state.page2_idx).style.display = "inline-block";

        if (state.r2l) {
            getPage(state.page2_idx).style.order = 1;
        } else {
            getPage(state.page2_idx).style.order = 3;
        }

    } else {
        state.page2_idx = -1;
    }

    document.getElementById("pageIdxInput").value = state.page_idx + 1;

    page2_txt = (state.page2_idx >= 0) ? ',' + (state.page2_idx + 1) : "";
    document.getElementById("pageIdxDisplay").innerHTML = (state.page_idx + 1) + page2_txt + '/' + num_pages;

    saveState();
    zoomDefault();
    if (state.eInkMode) {
        eInkRefresh();
    }
}

function firstPage() {
    updatePage(0);
}

function lastPage() {
    updatePage(num_pages - 1);
}

function prevPage() {
    updatePage(state.page_idx - (state.singlePageView ? 1 : 2));
}

function nextPage() {
    updatePage(state.page_idx + (state.singlePageView ? 1 : 2));
}

function inputLeftLeft() {
    if (state.r2l) {
        lastPage();
    } else {
        firstPage();
    }
}

function inputLeft() {
    if (state.r2l) {
        nextPage();
    } else {
        prevPage();
    }
}

function inputRight() {
    if (state.r2l) {
        prevPage();
    } else {
        nextPage();
    }
}

function inputRightRight() {
    if (state.r2l) {
        firstPage();
    } else {
        lastPage();
    }
}

function toggleFullScreen() {
    var doc = window.document;
    var docEl = doc.documentElement;

    var requestFullScreen = docEl.requestFullscreen || docEl.mozRequestFullScreen || docEl.webkitRequestFullScreen || docEl.msRequestFullscreen;
    var cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;

    if (!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {
        requestFullScreen.call(docEl);
    } else {
        cancelFullScreen.call(doc);
    }
}

function eInkRefresh() {
    pc.classList.add("inverted");
    document.body.style.backgroundColor = "black";
    setTimeout(function () {
        pc.classList.remove("inverted");
        document.body.style.backgroundColor = r.style.getPropertyValue("--colorBackground");
    }, 300);
}

function checkImage(path) {
    return new Promise((resolve) => {
        var img = new Image();
        img.onload = function () {
            resolve({path, status: true});
        };
        img.onerror = function () {
            resolve({path, status: false});
        };
        img.src = path;
    });
}

function checkImages(imagePaths) {
    let promises = imagePaths.map(path => checkImage(path));
    return Promise.all(promises);
}

function checkImagesAndAlert() {
    let imagePaths = [];
    for (var i = 0; i < num_pages; i++) {
        let page = getPage(i);
        let pc = page.getElementsByClassName("pageContainer")[0];
        let bg = pc.style.backgroundImage;
        imagePaths.push(bg.substring(5, bg.length - 2));
    }

    checkImages(imagePaths).then(results => {
        let missingImages = results.filter(result => !result.status).map(result => result.path);
        if (missingImages.length > 0) {
            alert('Some images are missing. Make sure, that images are stored in the folder next to HTML file.\n' + missingImages.join(',\n'));
        }
    });
}
</script></body></html>